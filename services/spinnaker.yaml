---

halyard:
  spinnakerVersion: 1.17.5
  image:
    tag: 1.28.0
  additionalScripts:
    enabled: true
    configMapName: halyard-config
    configMapKey: config.sh
    create: true
    data:
      enable_helm_artifact.sh: |-
        echo "enabling helm artifact"
        $HAL_COMMAND config artifact helm enable
        $HAL_COMMAND config artifact helm account add stable \
          --repository https://storage.googleapis.com/homelabprojects-public
        $HAL_COMMAND config artifact helm account add openfaas \
          --repository https://openfaas.github.io/faas-netes
        $HAL_COMMAND config artifact helm account add chartmuseum \
          --repository http://chartmuseum-chartmuseum.storage:8080
        $HAL_COMMAND config artifact helm account add jetstack \
          --repository https://charts.jetstack.io
        $HAL_COMMAND config artifact helm account add istio.io \
          --repository https://storage.googleapis.com/istio-release/releases/1.3.5/charts
      enable_gcs.sh: |-
        echo "enabling gcs artifact"
        $HAL_COMMAND config artifact gcs enable
        $HAL_COMMAND config artifact gcs account add gcs \
          --json-path /opt/gcs/key.json
      enable_no_auth_http.hs: |-
        echo "enabling http artifact"
        $HAL_COMMAND config artifact http enable
  additionalProfileConfigMaps:
    data:
      gate-local.yml:
        security:
          oauth2:
            client:
              # clientId: 
              # clientSecret:
              # userAuthorizationUri:
              # accessTokenUri:
              scope: openid email profile
            resource: {}
              # userInfoUri:
            userInfoMapping:
              email: email
              firstName: given_name
              lastName: family_name
              username: preferred_username
          tomcat:
            protocolHeader: X-Forwarded-Proto
            remoteIpHeader: X-Forwarded-For
            internalProxies: .*
  resources:
    requests:
      cpu: 250m
      memory: 500Mi
    limits:
      cpu: 500m
      memory: 1Gi
dockerRegistries:
- name: dockerhub
  address: index.docker.io
  repositories:
    - hugocortes/me
    - hugocortes/blue-green
spinnakerFeatureFlags:
  - artifacts
  - pipeline-templates
  - managed-pipeline-templates-v2-ui
  - artifacts-rewrite
minio:
  enabled: false
gcs:
  enabled: true
redis:
  enabled: false
  external:
    host: redis-master.storage.svc.cluster.local
kubeConfig:
  enabled: true
  secretName: kubeconfig
  secretKey: config
  contexts:
  - prometheus
  - hestia
  deploymentContext: prometheus
  omittedNameSpaces:
  - kube-public
